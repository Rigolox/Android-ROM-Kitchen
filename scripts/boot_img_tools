
clear
if [ ! -d WORKING_* ]
then
  echo No working folder found!
  scripts/press_enter
  exit 0
fi


while :
do

  clear

  echo
  echo "boot.img"
  echo "--------"
  echo
  echo "Enter a choice:"
  echo 

  if [ -d BOOT-EXTRACTED ] 
  then
    echo "  b = Build boot.img from BOOT-EXTRACTED folder (for working folder)"
    echo "  r = Remove BOOT-EXTRACTED folder (don't build boot.img)"
  else
    echo "  w = Extract kernel and ramdisk from boot.img in working folder"
  fi
  echo "  a = Extract kernel and ramdisk from boot.img in any folder"
  echo "  x = Exit"
  echo
  echo -n "? "

  read enterLetter

  if [ "$enterLetter" == "w" ]
  then
    scripts/ensure_boot_extracted
  elif [ "$enterLetter" == "r" ] 
  then
    rm -rf BOOT-EXTRACTED; echo; echo "Deleted"
  elif [ "$enterLetter" == "b" ] 
  then
    scripts/prompt_build_boot
    scripts/build_boot_img
  elif [ "$enterLetter" == "a" ]
  then
    scripts/extract_boot_img
  elif [ "$enterLetter" == "x" ]
  then
    exit 0
  else 
    echo "Invalid option"
    continue
  fi

  scripts/press_enter

done
