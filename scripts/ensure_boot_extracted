
if [ "$1" == "" ]
then
  clear
fi

if [ -d BOOT-EXTRACTED ]
then
  echo Folder 'BOOT-EXTRACTED' already exists 
else

  if [ -d WORKING_* ]
  then
    echo
    echo Working folder found
  else
    echo
    echo Working folder not found, you will need to create one!
    exit 0
  fi

  cd WORKING_*

  if [ -d system ]
  then

    if [ -e boot.img ]
    then

      echo Making folder 'BOOT-EXTRACTED' ...
      mkdir ../BOOT-EXTRACTED

      cp boot.img ../BOOT-EXTRACTED/
      cd ..
      cp tools/extract_boot_files/extract-*.pl BOOT-EXTRACTED/
      cd BOOT-EXTRACTED

      echo
      echo Extracting kernel ...
      ./extract-kernel.pl boot.img

      echo
      echo Extracting ramdisk ... 
      ./extract-ramdisk.pl boot.img

      rm boot.img
      rm extract-*.pl
      cd ..
      echo

    else
      echo "Error: boot.img not found!"
      echo
      cd ..
      exit 0
    fi      
  
  else
    echo "Error: system folder not found under working folder!"
    cd ..
    exit 0
  fi
fi

